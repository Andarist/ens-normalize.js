function t(t){if("string"!=typeof t)throw new TypeError("expected string");return[...t].map((t=>t.codePointAt(0)))}function r(t){return t<26?97+t:22+t}function e(t,r){let e=t-r;return e<=0?1:e>=26?26:e}function n(t,r,e){t=Math.floor(t/(e?700:2)),t+=Math.floor(t/r);let n=0;for(;t>455;)t=Math.floor(t/35),n+=36;return n+Math.floor(36*t/(t+38))}const i=new Set(t("-.0123456789abcdefghijklmnopqrstuvwxyz"));function o(t,r){return new Error(`Invalid label "${e=String.fromCodePoint(...t),e.replace(/[^\x20-\x21\x23-\x7A\x7C\x7E]/gu,(t=>{return`{${r=t.codePointAt(0),r.toString(16).toUpperCase().padStart(2,"0")}}`;var r}))}": ${r}`);var e}function f(f){let l=0;return f.split(".").map(((f,u)=>{if(u>0&&l++,!f)return"";let a=t(f),h=a.length;if(45==a[0])throw o(a,"leading hyphen");if(h>=2&&45==a[h-1])throw o(a,"trailing hyphen");if(h>=4&&45==a[2]&&45==a[3])throw o(a,"invalid label extension");let w=function(t,i){let o=t.filter((t=>t<128)),f=o.length;if(f==t.length)return t;i&&o.unshift(120,110,45,45),f&&o.push(45);let l=128,u=72,a=0,h=f;for(;h<t.length;){let i=t.reduce(((t,r)=>r>=l&&r<t?r:t),1/0);a+=(i-l)*(h+1);for(let l of t)if(l<i)a++;else if(l==i){let t=a;for(let n=36;;n+=36){let i=e(n,u),f=t-i;if(f<0)break;let l=36-i;o.push(r(i+f%l)),t=Math.floor(f/l)}o.push(r(t)),u=n(a,h+1,h==f),a=0,h++}a++,l=i+1}return o}(a,!0);if(w.length>63)throw o(a,"too long");if(w.some((t=>!i.has(t))))throw o(a,"invalid ASCII");if(l+=w.length,l>253)throw new Error("Name too long");return String.fromCodePoint(...w)})).join(".")}export{f as dns_from_normalized_ens};
