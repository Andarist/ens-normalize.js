function r(r){return[...r].map((r=>r.codePointAt(0)))}function t(r){return r.replace(/[^\x21\x23-\x7A\x7C\x7E]/gu,(r=>{return`{${t=r.codePointAt(0),t.toString(16).toUpperCase()}}`;var t}))}function e(r){return r<26?97+r:22+r}function o(r,t){let e=r-t;return e<=0?1:e>=26?26:e}function n(r,t,e){r=Math.floor(r/(e?700:2)),r+=Math.floor(r/t);let o=0;for(;r>455;)r=Math.floor(r/35),o+=36;return o+Math.floor(36*r/(r+38))}const i=new Set(r("-.0123456789abcdefghijklmnopqrstuvwxyz"));function l(l){let f=0;return l.split(".").map(((l,h)=>{if(h>0&&f++,!l)return"";let a=r(l),u=function(r){if(!Array.isArray(r)||!r.every((r=>Number.isSafeInteger(r)&&r>=0&&r<=1114111)))throw new TypeError("expected array of Unicode codepoints");let t=r.filter((r=>r<128)),i=t.length;if(i==r.length)return r;i&&t.push(45);let l=128,f=72,h=0,a=i;for(;a<r.length;){let u=r.reduce(((r,t)=>t>=l&&t<r?t:r),1114111);h+=(u-l)*(a+1);for(let l of r)if(l<u)h++;else if(l==u){let r=h;for(let n=36;;n+=36){let i=o(n,f),l=r-i;if(l<0)break;let h=36-i;t.push(e(i+l%h)),r=Math.floor(l/h)}t.push(e(r)),f=n(h,a+1,a==i),h=0,a++}h++,l=u+1}return t}(a);try{for(let r of u)if(!i.has(r))throw new Error(`invalid ASCII: "${t(String.fromCodePoint(r))}"`);if(f+=u.length,u===a){if(l.startsWith("xn--"))throw new Error("punycode literal");if("--"===l.slice(2,4))throw Error("invalid label extension");if(l.startsWith("-"))throw Error("leading hyphen");if(l.endsWith("-"))throw Error("trailing hyphen")}else f+=4,l="xn--"+String.fromCodePoint(...u);if(l.length>63)throw new Error(`too long: ${l.length} > 63`)}catch(r){throw new Error(`Invalid label "${t(l)}": ${r.message}`)}if(f>253)throw new Error(`Name too long: ${f} > 253`);return l})).join(".")}export{l as dns_from_normalized_ens};
