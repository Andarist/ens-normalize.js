function t(t){return t.replace(/[^\x21\x23-\x7A\x7C\x7E]/gu,(t=>`{${function(t){return t.toString(16).toUpperCase().padStart(2,"0")}(t.codePointAt(0))}}`))}function r(t){if("string"!=typeof t)throw new TypeError("expected string");return[...t].map((t=>t.codePointAt(0)))}function n(t){return t<26?97+t:22+t}function e(t,r){let n=t-r;return n<=0?1:n>=26?26:n}function o(t,r,n){t=Math.floor(t/(n?700:2)),t+=Math.floor(t/r);let e=0;for(;t>455;)t=Math.floor(t/35),e+=36;return e+Math.floor(36*t/(t+38))}const i=new Set(r("-.0123456789abcdefghijklmnopqrstuvwxyz"));function f(r,n){return new Error(`Invalid label "${t(r)}": ${n}`)}function l(l){let u=0;return l.split(".").map(((l,h)=>{if(h>0&&u++,!l)return"";if(/^xn--/i.test(l))throw f(l,"literal punycode");if(l.startsWith("-"))throw f(l,"leading hyphen");if(l.endsWith("-"))throw f(l,"trailing hyphen");let a=r(l),c=function(t){let r=t.filter((t=>t<128)),i=r.length;if(i==t.length)return t;i&&r.push(45);let f=128,l=72,u=0,h=i;for(;h<t.length;){let a=t.reduce(((t,r)=>r>=f&&r<t?r:t),1/0);u+=(a-f)*(h+1);for(let f of t)if(f<a)u++;else if(f==a){let t=u;for(let o=36;;o+=36){let i=e(o,l),f=t-i;if(f<0)break;let u=36-i;r.push(n(i+f%u)),t=Math.floor(f/u)}r.push(n(t)),l=o(u,h+1,h==i),u=0,h++}u++,f=a+1}return r}(a);if(c.length>63)throw f(l,"too long");for(let r of c)if(!i.has(r))throw f(l,`invalid ASCII: "${t(String.fromCodePoint(r))}"`);if(c.some((t=>!i.has(t)))&&(u+=c.length),u>253)throw new Error("Name too long");return c===a?l:"xn--"+String.fromCodePoint(...c)})).join(".")}export{l as dns_from_normalized_ens};
