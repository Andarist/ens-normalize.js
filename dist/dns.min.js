function r(r){return[...r].map((r=>r.codePointAt(0)))}function t(r){return r.replace(/[^\x21\x23-\x7A\x7C\x7E]/gu,(r=>{return`{${t=r.codePointAt(0),t.toString(16).toUpperCase().padStart(2,"0")}}`;var t}))}function e(r){return r<26?97+r:22+r}function n(r,t){let e=r-t;return e<=0?1:e>=26?26:e}function o(r,t,e){r=Math.floor(r/(e?700:2)),r+=Math.floor(r/t);let n=0;for(;r>455;)r=Math.floor(r/35),n+=36;return n+Math.floor(36*r/(r+38))}const i=new Set(r("-.0123456789abcdefghijklmnopqrstuvwxyz"));function l(l){if((l=l.split(".").map((l=>{if(!l)return"";let f=l;try{let l=r(f),h=function(r){if(!Array.isArray(r)||!r.every((r=>Number.isSafeInteger(r)&&r>=0&&r<=1114111)))throw new TypeError("expected array of Unicode codepoints");let t=r.filter((r=>r<128)),i=t.length;if(i==r.length)return r;i&&t.push(45);let l=128,f=72,h=0,a=i;for(;a<r.length;){let u=r.reduce(((r,t)=>t>=l&&t<r?t:r),1114111);h+=(u-l)*(a+1);for(let l of r)if(l<u)h++;else if(l==u){let r=h;for(let o=36;;o+=36){let i=n(o,f),l=r-i;if(l<0)break;let h=36-i;t.push(e(i+l%h)),r=Math.floor(l/h)}t.push(e(r)),f=o(h,a+1,a==i),h=0,a++}h++,l=u+1}return t}(l);for(let r of h)if(!i.has(r))throw new Error(`invalid ASCII: "${t(String.fromCodePoint(r))}"`);if(h===l){if(f.startsWith("xn--"))throw new Error("punycode literal");if("--"===f.slice(2,4))throw new Error("invalid label extension");if(f.startsWith("-"))throw new Error("leading hyphen");if(f.endsWith("-"))throw new Error("trailing hyphen")}else f="xn--"+String.fromCodePoint(...h);if(f.length>63)throw new Error(`too long: ${f.length} > 63`)}catch(r){throw new Error(`Invalid label "${t(l)}": ${r.message}`)}return f})).join(".")).length>253)throw new Error(`Name too long: ${l.length} > 253`);return l}export{l as dns_from_normalized_ens};
