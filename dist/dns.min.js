function t(t){return[...t].map((t=>t.codePointAt(0)))}function e(t){return t.replace(/[^\x21\x23-\x7A\x7C\x7E]/gu,(t=>{return`{${e=t.codePointAt(0),e.toString(16).toUpperCase()}}`;var e}))}function r(t){return t<26?97+t:22+t}function n(t,e){let r=t-e;return r<=0?1:r>=26?26:r}function o(t,e,r){t=Math.floor(t/(r?700:2)),t+=Math.floor(t/e);let n=0;for(;t>455;)t=Math.floor(t/35),n+=36;return n+Math.floor(36*t/(t+38))}const i=new Set(t("-.0123456789abcdefghijklmnopqrstuvwxyz"));function l(t,r){return new Error(`Invalid label "${e(t)}": ${r}`)}function f(f){let h=0;return f.split(".").map(((f,a)=>{if(a>0&&h++,!f)return"";let u=t(f),c=function(t){if(!Array.isArray(t)||!t.every((t=>Number.isSafeInteger(t)&&t>=0&&t<=1114111)))throw new TypeError("expected array of Unicode codepoints");let e=t.filter((t=>t<128)),i=e.length;if(i==t.length)return t;i&&e.push(45);let l=128,f=72,h=0,a=i;for(;a<t.length;){let u=t.reduce(((t,e)=>e>=l&&e<t?e:t),1114111);h+=(u-l)*(a+1);for(let l of t)if(l<u)h++;else if(l==u){let t=h;for(let o=36;;o+=36){let i=n(o,f),l=t-i;if(l<0)break;let h=36-i;e.push(r(i+l%h)),t=Math.floor(l/h)}e.push(r(t)),f=o(h,a+1,a==i),h=0,a++}h++,l=u+1}return e}(u);if(c.length>63)throw l(f,"too long");for(let t of c)if(!i.has(t))throw l(f,`invalid ASCII: "${e(String.fromCodePoint(t))}"`);if(h+=c.length,c===u){if("--"===f.slice(2,4))throw l(f,"invalid label extension");if(f.startsWith("-"))throw l(f,"leading hyphen");if(f.endsWith("-"))throw l(f,"trailing hyphen")}else h+=4,f="xn--"+String.fromCodePoint(...c);if(h>253)throw new Error("Name too long");return f})).join(".")}export{f as dns_from_normalized_ens};
