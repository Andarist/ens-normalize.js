function t(t){return t.toString(16).toUpperCase().padStart(2,"0")}function n(t){return/^[\x21-\x7E]+$/gu.test(t)}function e(n){return n.map(t).join(" ")}function o(){let t=document.createElement("span");return t.classList.add("arrow"),t.innerHTML="âž”",t}function d(e,o){let d=document.createElement("span");if(8205==e)d.classList.add("mod","zwj"),d.innerHTML="ZWJ";else if(8204==e)d.classList.add("mod","zwj"),d.innerHTML="ZWNJ";else if(65039==e)d.classList.add("mod","dropped","style"),d.innerHTML="FE0F";else if(8419==e)d.classList.add("mod","keycap"),d.innerHTML="Keycap";else if(e>=917536&&e<=917631){e-=917504;let o=String.fromCodePoint(e);127===e?(d.classList.add("mod"),d.innerHTML="TagEnd"):(n(o)?d.innerHTML=o:(d=document.createElement("code"),d.innerHTML=t(e)),d.classList.add("mod","tag"))}else d.classList.add("raw"),d.innerHTML=o(e);return d}function a(s,i){let r=document.createElement("div");return r.classList.add("tokens"),i&&(s=s.flatMap((t=>"nfc"===t.type?t.tokens:t))),r.append(...s.flatMap((s=>{let r;if("emoji"===s.type){let t=i?s.input:s.cps;r=document.createElement("a"),r.href=`https://emojipedia.org/${String.fromCodePoint(...s.emoji)}`,r.title=`Emoji\n${e(t)}`,r.classList.add("glyph"),r.append(...t.map((t=>d(t,String.fromCodePoint))))}else if("nfc"===s.type){r=document.createElement("div"),r.classList.add("nfc");let t=a(s.tokens,!1);t.classList.add("before");let n=document.createElement("div");n.classList.add("valid"),n.innerHTML=String.fromCodePoint(...s.cps),n.title=`NFC\n${e(s.cps)}`,r.append(t,o(),n)}else if(r=document.createElement("div"),"valid"===s.type)r.classList.add("valid"),r.innerHTML=String.fromCodePoint(...s.cps),r.title=`Valid\n${e(s.cps)}`;else if("mapped"===s.type){r.classList.add("mapped");let n=document.createElement("span");n.classList.add("before"),n.innerHTML=String.fromCodePoint(s.cp),n.title=`Mapped\n${t(s.cp)}`,r.append(n),i||r.append(o(),...s.cps.map((n=>{let e=document.createElement("span");return e.innerHTML=String.fromCodePoint(n),e.title=t(n),e})))}else if("ignored"===s.type)r.innerHTML=t(s.cp),r.title=`Ignored\n${t(s.cp)}`,r.classList.add("ignored");else if("disallowed"===s.type)r=d(s.cp,(e=>{let o=String.fromCodePoint(e);return n(o)?o:t(e)})),r.classList.add("disallowed"),r.title=`Disallowed\n${t(s.cp)}`;else if("stop"===s.type)r.classList.add("stop"),r.innerHTML=".";else{if("isolated"!==s.type)throw new TypeError(`unknown token type: ${s.type}`);r.classList.add("isolated"),r.innerHTML=String.fromCodePoint(s.cp),r.title=`Valid (Isolated)\n${t(s.cp)}`}return r}))),r}function s(){let t=document.createElement("style");t.innerText="\n\t.tokens {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 2px;\n\t}\n\t.tokens > * {\n\t\tpadding: 2px 4px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 4px;\n\t}\n\t.tokens a {\n\t\ttext-decoration: none;\n\t}\n\t.tokens a:hover {\n\t\toutline: 2px solid #00f;\n\t}\n\t.tokens .valid {\n\t\tborder-radius: 5px;\n\t\tbackground: #cfc;\n\t\tborder: 2px solid #0a0;\n\t\tline-break: anywhere;\n\t}\n\t.tokens .ignored {\n\t\tcolor: #fff;\n\t\tbackground: #aaa;\n\t\tmin-width: 5px;\n\t\tfont-size: 65%;\n\t\tfont-family: monospace;\n\t\tborder-radius: 5px;\n\t}\n\t.tokens .disallowed {\n\t\tbackground: #c00;\t\n\t\tborder-radius: 5px;\n\t\tcolor: #fff;\n\t}\n\t.tokens .disallowed.raw {\n\t\tfont-size: 65%;\t\t\n\t\tfont-family: monospace;\n\t\tbackground: #800;\n\t}\n\t.tokens .disallowed.mod {\n\t\tborder: 2px solid #800;\n\t\tfont-size: 80%;\n\t}\n\t.tokens .mapped {\n\t\tdisplay: flex;\n\t\tborder: 2px solid #66f;\n\t\tbackground: #ccf;\n\t\tborder-radius: 5px;\n\t}\n\t.tokens .mapped span:first-child {\n\t\tmargin-bottom: -4px;\n\t\tborder-bottom: 4px solid #000;\n\t}\n\t.tokens .stop {\n\t\tfont-weight: bold;\n\t}\n\t.tokens .isolated {\n\t\tborder: 2px solid #87e;\n\t\tborder-radius: 5px;\n\t\tbackground: #ecf;\n\t}\n\t.tokens .glyph {\n\t\tborder: 2px solid #0aa;\n\t\tborder-radius: 5px;\n\t\tbackground: #cff;\n\t}\n\t.tokens .mod {\n\t\tfont-size: 70%;\n\t\tpadding: 2px;\n\t\tcolor: #fff;\n\t\tborder-radius: 5px;\n\t}\n\t.tokens .glyph .mod {\n\t\tbackground: #333;\t\t\n\t}\n\t.tokens .glyph .mod.zwj {\n\t\tbackground: #0aa;\n\t}\n\t.tokens .glyph .mod.tag {\n\t\tbackground: #33f;\n\t}\n\t.tokens .glyph .mod.dropped {\n\t\tbackground: #aaa;\t\t\n\t}\n\t.tokens .arrow {\n\t\tcolor: rgba(0, 0, 0, 0.35);\n\t}\n\t.tokens .nfc {\n\t\tdisplay: flex;\n\t\tborder: 2px solid #fa0;\n\t\tbackground: #fd8;\n\t\tborder-radius: 5px;\n\t}",document.body.append(t)}export{a as dom_from_tokens,s as use_default_style};
