function t(t){return t.toString(16).toUpperCase().padStart(2,"0")}function n(n){return`{${t(n)}}`}function e(t,e=n){return t.replace(/(?:([\x00-\x20\x7F-\xA0\s\u200C\u200D\u2800\u{E0020}-\u{E007F}])|([\x26\x3C\x3E]))/gu,((t,n,o)=>n?e(n.codePointAt(0)):`&#${o.codePointAt(0)};`))}function o(){let t=document.createElement("span");return t.classList.add("arrow"),t.innerHTML="‚ûî",t}function d(n){let o=document.createElement("span");if(8205==n)o.classList.add("mod","zwj"),o.innerHTML="ZWJ";else if(8204==n)o.classList.add("mod","zwj"),o.innerHTML="ZWNJ";else if(65039==n)o.classList.add("mod","dropped","style"),o.innerHTML="FE0F";else if(8419==n)o.classList.add("mod","keycap"),o.innerHTML="Keycap";else if(n>=917536&&n<=917631){n-=917504;let t,d=String.fromCodePoint(n);o.classList.add("mod","tag"),127===n?t="End":(t=e(d),t!==d&&o.classList.add("code")),o.innerHTML=`<span class="tag">${t}<sub>üè∑Ô∏è</sub></span>`}else{let d=String.fromCodePoint(n),s=e(d,t);s!==d&&o.classList.add("code"),o.classList.add("raw"),o.innerHTML=s}return o}function s(n,e,o){return`${n}\n${function(n){return n.map(t).join(" ")}(e)}`}function a(n,{before:e=!1,components:i=!0,titler:r=s,emoji_url:l="https://emojipedia.org/%s"}={}){let p=document.createElement("div");return p.classList.add("tokens"),e&&(n=n.flatMap((t=>"nfc"===t.type?t.tokens:t))),p.append(...n.flatMap((n=>{let s;if("emoji"===n.type){let t=e?n.input:n.cps;s=document.createElement("a"),s.href=l.replace("%s",String.fromCodePoint(...n.emoji)),s.title=r("Emoji",t,n),s.classList.add("glyph"),i?s.append(...t.map((t=>d(t)))):s.innerHTML=String.fromCodePoint(...n.emoji)}else if("nfc"===n.type){s=document.createElement("div"),s.classList.add("nfc");let t=a(n.tokens,!1);t.classList.add("before");let e=document.createElement("div");e.classList.add("valid"),e.innerHTML=String.fromCodePoint(...n.cps),e.title=r("NFC",n.cps,n),s.append(t,o(),e)}else if(s=document.createElement("div"),"valid"===n.type)s.classList.add("valid"),s.innerHTML=String.fromCodePoint(...n.cps),s.title=r("Valid",n.cps,n);else if("mapped"===n.type){s.classList.add("mapped");let t=document.createElement("span");if(t.classList.add("before"),t.innerHTML=String.fromCodePoint(n.cp),t.title=r("Mapped",[n.cp],n),s.append(t),!e){let t=document.createElement("span");t.innerHTML=n.cps.map((t=>String.fromCodePoint(t))).join("¬†"),t.title=r("Mapped (Output)",n.cps,n),s.append(o(),t)}}else if("ignored"===n.type)s.innerHTML=t(n.cp),s.title=r("Ignored",[n.cp]),s.classList.add("ignored");else if("disallowed"===n.type)s=d(n.cp),s.classList.add("disallowed"),s.title=r("Disallowed",[n.cp]);else if("stop"===n.type)s.classList.add("stop"),s.innerHTML=".";else{if("isolated"!==n.type)throw new TypeError(`unknown token type: ${n.type}`);s.classList.add("isolated"),s.innerHTML=String.fromCodePoint(n.cp),s.title=r("Valid (Isolated)",[n.cp])}return s}))),p}function i(){let t=document.createElement("style");t.innerText="\n\t.tokens {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 2px;\n\t}\n\t.tokens > * {\n\t\tpadding: 2px 4px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 4px;\n\t}\n\t.tokens a {\n\t\ttext-decoration: none;\n\t}\n\t.tokens a:hover {\n\t\toutline: 2px solid #00f;\n\t}\n\t.tokens .valid {\n\t\tborder-radius: 5px;\n\t\tbackground: #cfc;\n\t\tborder: 2px solid #0a0;\n\t\tline-break: anywhere;\n\t}\n\t.tokens .ignored {\n\t\tcolor: #fff;\n\t\tbackground: #aaa;\n\t\tmin-width: 5px;\n\t\tfont-size: 70%;\n\t\tfont-family: monospace;\n\t\tborder-radius: 5px;\n\t}\n\t.tokens .disallowed {\n\t\tbackground: #c00;\t\n\t\tmin-width: 5px;\n\t\tborder-radius: 5px;\n\t\tcolor: #fff;\n\t}\n\t.tokens .disallowed.code {\n\t\tfont-size: 75%;\n\t\tbackground: #800;\n\t}\n\t.tokens .tag sub {\n\t\tfont-size: 50%;\n\t\tcolor: #ccc;\n\t}\n\t.tokens .disallowed.mod {\n\t\tborder: 2px solid #800;\n\t\tfont-size: 80%;\n\t}\n\t.tokens .mapped {\n\t\tdisplay: flex;\n\t\tborder: 2px solid #66f;\n\t\tbackground: #ccf;\n\t\tborder-radius: 5px;\n\t}\n\t.tokens .mapped span:first-child {\n\t\tmargin-bottom: -4px;\n\t\tborder-bottom: 4px solid #000;\n\t}\n\t.tokens .stop {\n\t\tfont-weight: bold;\n\t}\n\t.tokens .isolated {\n\t\tborder: 2px solid #87e;\n\t\tborder-radius: 5px;\n\t\tbackground: #ecf;\n\t}\n\t.tokens .glyph {\n\t\tborder: 2px solid #0aa;\n\t\tborder-radius: 5px;\n\t\tbackground: #cff;\n\t}\n\t.tokens .mod {\n\t\tfont-size: 70%;\n\t\tpadding: 2px;\n\t\tcolor: #fff;\n\t\tborder-radius: 5px;\n\t}\n\t.tokens .glyph .mod {\n\t\tbackground: #333;\n\t}\n\t.tokens .glyph .mod.zwj {\n\t\tbackground: #0aa;\n\t}\n\t.tokens .glyph .mod.tag {\n\t\tbackground: #0aa;\n\t}\n\t.tokens .glyph .mod.tag sub {\n\t\tdisplay: none;\n\t}\n\t.tokens .glyph .mod.dropped {\n\t\tbackground: #aaa;\t\t\n\t}\n\t.tokens .arrow {\n\t\tcolor: rgba(0, 0, 0, 0.35);\n\t}\n\t.tokens .code {\n\t\tfont-family: monospace;\n\t}\n\t.tokens .nfc {\n\t\tdisplay: flex;\n\t\tborder: 2px solid #fa0;\n\t\tbackground: #fd8;\n\t\tborder-radius: 5px;\n\t}",document.body.append(t)}export{a as dom_from_tokens,i as use_default_style};
