function t(t){return t.toString(16).toUpperCase().padStart(2,"0")}function n(n){return`{${t(n)}}`}function e(t,e=n){return t.replace(/(?:([\x00-\x20\x7F\xA0\s\u200C\u200D\u2800\u{E0020}-\u{E007F}])|([\x26\x3C\x3E]))/gu,((t,n,d)=>n?e(n.codePointAt(0)):`&#${d.codePointAt(0)};`))}function d(n){return e(String.fromCodePoint(...n),(n=>8204==n?'<span class="mod zwj">ZWNJ</span>':8205==n?'<span class="mod zwj">ZWJ</span>':`<code>${t(n)}</code>`))}function o(n){return`Hex: 0x${n.map(t).join(" ")}\nDec: ${n.join(" ")}`}function a(){let t=document.createElement("span");return t.classList.add("arrow"),t.innerHTML="âž”",t}function s(n,e){let r=document.createElement("div");return r.classList.add("tokens"),e&&(n=n.flatMap((t=>"nfc"===t.type?t.tokens:t))),r.append(...n.flatMap((n=>{let r;if("emoji"===n.type){let d=e?n.input:n.cps;r=document.createElement("a"),r.href=`https://emojipedia.org/${String.fromCodePoint(...n.emoji)}`,r.classList.add("glyph"),r.append(...d.map(((n,e)=>{let d=document.createElement("span");if(8205==n)d.classList.add("mod","zwj"),d.innerHTML="ZWJ";else if(65039==n)d.classList.add("mod","dropped","style"),d.innerHTML="FE0F";else if(8419==n)d.classList.add("mod","keycap"),d.innerHTML="Keycap";else if(n>=917536&&n<=917631){n-=917504;let e=String.fromCodePoint(n);127===n?(d.classList.add("mod"),d.innerHTML="TagEnd"):(/^[\x21-\x7E]+$/gu.test(e)?d.innerHTML=e:(d=document.createElement("code"),d.innerHTML=t(n)),d.classList.add("mod","tag"))}else d.classList.add("emoji"),d.innerHTML=String.fromCodePoint(n);return d})))}else if("nfc"===n.type){r=document.createElement("div"),r.classList.add("nfc");let t=s(n.tokens,!1);t.classList.add("before");let e=document.createElement("div");e.classList.add("valid"),e.innerHTML=d(n.cps),e.title=o(n.cps),r.append(t,a(),e)}else if(r=document.createElement("div"),"valid"===n.type)r.classList.add("valid"),r.innerHTML=d(n.cps),r.title=o(n.cps);else if("mapped"===n.type){r.classList.add("mapped");let t=document.createElement("span");t.classList.add("before"),t.innerHTML=d([n.cp]),t.title=o([n.cp]),r.append(t),e||r.append(a(),...n.cps.map((t=>{let n=document.createElement("span");return n.innerHTML=d([t]),n.title=o([t]),n})))}else if("ignored"===n.type)r=document.createElement("code"),r.innerHTML=t(n.cp),r.title=o([n.cp]),r.classList.add("ignored");else if("disallowed"===n.type)r.classList.add("disallowed"),r.innerHTML=d([n.cp]),r.title=o([n.cp]);else{if("stop"!==n.type)throw new TypeError(`unknown token type: ${n.type}`);r.classList.add("stop"),r.innerHTML="."}return r}))),r}function r(){let t=document.createElement("style");t.innerText="\n\t.tokens {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 2px;\n\t}\n\t.tokens > * {\n\t\tpadding: 2px 4px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 4px;\n\t}\n\t.tokens a {\n\t\ttext-decoration: none;\n\t}\n\t.tokens a:hover {\n\t\toutline: 2px solid #00f;\n\t}\n\t.tokens .valid {\n\t\tborder-radius: 5px;\n\t\tbackground: #cfc;\n\t\tborder: 2px solid #0a0;\n\t\tline-break: anywhere;\n\t}\n\t.tokens .ignored {\n\t\tcolor: #fff;\n\t\tbackground: #aaa;\n\t\tmin-width: 5px;\n\t}\n\t.tokens .disallowed {\n\t\tbackground: #f66;\t\n\t}\n\t.tokens .mapped {\n\t\tdisplay: flex;\n\t\tborder: 2px solid #66f;\n\t\tbackground: #ccf;\n\t\tborder-radius: 5px;\n\t}\n\t.tokens .mapped span:first-child {\n\t\tmargin-bottom: -4px;\n\t\tborder-bottom: 4px solid #000;\n\t}\n\t.tokens .stop {\n\t\tfont-weight: bold;\n\t}\n\t.tokens .glyph {\n\t\tborder: 2px solid #0aa;\n\t\tborder-radius: 5px;\n\t\tbackground: #cff;\n\t}\n\t.tokens .mod {\n\t\tfont-size: 70%;\n\t\tpadding: 2px;\n\t\tbackground: #333;\n\t\tcolor: #fff;\n\t\tborder-radius: 5px;\n\t}\n\t.tokens .mod.zwj {\n\t\tbackground: #0aa;\n\t}\n\t.tokens .mod.tag {\n\t\tbackground: #33f;\n\t}\n\t.tokens .mod.dropped {\n\t\tbackground: #aaa;\n\t\tmin-width: 5px;\n\t}\n\t.tokens .arrow {\n\t\tcolor: rgba(0, 0, 0, 0.35);\n\t}\n\t.tokens .nfc {\n\t\tdisplay: flex;\n\t\tborder: 2px solid #fa0;\n\t\tbackground: #fd8;\n\t\tborder-radius: 5px;\n\t}\n\t.tokens code {\n\t\tfont-size: 90%;\n\t\tpadding: 2px;\n\t\tborder-radius: 5px;\n\t\tcolor: #fff;\n\t\tbackground: rgba(0, 0, 0, .3);\n\t\talign-self: center;\n\t}",document.body.append(t)}export{s as dom_from_tokens,r as use_default_style};
